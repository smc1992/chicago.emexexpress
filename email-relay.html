<!DOCTYPE html>
<html>
<head>
    <title>IONOS Email Relay Setup Guide</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .code { background: #f5f5f5; padding: 15px; border-radius: 5px; margin: 10px 0; }
        .warning { background: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 5px; margin: 10px 0; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; padding: 15px; border-radius: 5px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>üöÄ IONOS Email Relay f√ºr Coolify Static Deployment</h1>
    
    <div class="success">
        <h3>‚úÖ Empfohlene L√∂sung: Email Relay Server</h3>
        <p>Ein kleiner Server, der Anfragen von der Static Site entgegennimmt und √ºber IONOS SMTP versendet.</p>
    </div>

    <h2>üîß Setup Optionen:</h2>

    <h3>Option 1: Cloudflare Workers (Kostenlos & Einfach)</h3>
    <div class="code">
        <pre>// Cloudflare Worker Script
addEventListener('fetch', event => {
  event.respondWith(handleRequest(event.request))
})

async function handleRequest(request) {
  if (request.method === 'POST') {
    const data = await request.json()
    
    // Send via IONOS SMTP using external service
    const response = await fetch('https://api.resend.com/emails', {
      method: 'POST',
      headers: {
        'Authorization': 'Bearer re_YOUR_API_KEY',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        from: 'noreply@emexexpress.de',
        to: 'ops@emexexpress.de',
        subject: data.subject,
        html: data.html
      })
    })
    
    return new Response(await response.text(), {
      status: response.status,
      headers: { 'Content-Type': 'application/json' }
    })
  }
}</pre>
    </div>

    <h3>Option 2: Vercel Serverless Function</h3>
    <div class="code">
        <pre>// api/send-email.js
const nodemailer = require('nodemailer');

const transporter = nodemailer.createTransporter({
  host: 'mail.ionos.de',
  port: 587,
  secure: false,
  auth: {
    user: 'ops@emexexpress.de',
    pass: 'your-password'
  }
});

export default async function handler(req, res) {
  if (req.method === 'POST') {
    try {
      await transporter.sendMail({
        from: req.body.from,
        to: 'ops@emexexpress.de',
        subject: req.body.subject,
        html: req.body.html
      });
      
      res.status(200).json({ success: true });
    } catch (error) {
      res.status(500).json({ error: error.message });
    }
  }
}</pre>
    </div>

    <h3>Option 3: Eigener kleiner Relay Server (Hetzner)</h3>
    <div class="code">
        <pre>// Docker Compose f√ºr Email Relay
version: '3.8'
services:
  email-relay:
    image: node:18-alpine
    ports:
      - "3000:3000"
    environment:
      - IONOS_USER=ops@emexexpress.de
      - IONOS_PASS=your-password
    volumes:
      - ./server.js:/app/server.js
    working_dir: /app
    command: node server.js</pre>
    </div>

    <div class="warning">
        <h3>‚ö†Ô∏è Wichtige Hinweise:</h3>
        <ul>
            <li><strong>API Keys sicher aufbewahren!</strong> Niemals im Frontend speichern</li>
            <li><strong>CORS konfigurieren!</strong> Nur deine Domain erlauben</li>
            <li><strong>Rate Limiting!</strong> Missbrauch verhindern</li>
            <li><strong>Logging!</strong> F√ºr Debugging und Monitoring</li>
        </ul>
    </div>

    <h2>üöÄ Schnellstart mit Cloudflare Workers:</h2>
    <ol>
        <li>Cloudflare Account erstellen (kostenlos)</li>
        <li>Worker erstellen mit obigem Script</li>
        <li>Resend API Key f√ºr Email-Versand</li>
        <li>Worker URL in booking-ionos.js eintragen</li>
        <li>Deploy zu Coolify - fertig!</li>
    </ol>

    <h2>üìß Alternative: IONOS direkt nutzen</h2>
    <p>IONOS bietet auch eine <strong>Webmail API</strong>, die direkt von JavaScript aus genutzt werden kann:</p>
    <div class="code">
        <pre>// IONOS Webmail API
const response = await fetch('https://webmail.ionos.de/api/v1/email/send', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_IONOS_TOKEN',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    to: 'ops@emexexpress.de',
    from: 'noreply@emexexpress.de',
    subject: 'Test Email',
    html: '&lt;h1&gt;Test&lt;/h1&gt;'
  })
});</pre>
    </div>

</body>
</html>
